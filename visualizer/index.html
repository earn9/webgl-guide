<meta charset=utf-8>
<link rel=stylesheet href=c.css>
<title>WebGL visualizer</title>
<script src=c.js></script>
<textarea id=code></textarea>
<iframe id=output></iframe>
<style>
* { margin: 0; padding: 0; border: 0; outline: 0; box-sizing: border-box; font-size: 12px; }
#code, #output, .CodeMirror { height: 100%; border: 1px solid; float: left; }
#code, .CodeMirror { width: calc(100% - 420px) }
#output { width: 420px; position: fixed; border: none; transition: .1s;}
</style>
<script>
E=CodeMirror.fromTextArea(code,{lineNumbers:true,lineWrapping:true,mode:"htmlmixed"});
(U=z=>output.srcdoc=E.getValue())();
E.on("keyup",()=>{location.hash=btoa(U())})
onload=()=>{
  if(location.search){
    output.srcdoc="loading...";
    [url,id]=location.search.split("&");
    if(url){
      fetch(url.replace("?url=","../me/")).then(data=>data.text()).then(txt=>E.setValue(txt.replace(/<script.*?kaspersky.*?script>/g,'')),setTimeout(U,2000))
    }
    if(id){
      id = id.replace("id=","");
    }
  }
  else if(location.hash){E.setValue(atob(location.hash.slice(1)));U();}
}

top.onscroll = () => {
  console.log(1);
  if(id){
    if(top.scrollY > top[id].offsetTop){
      output.style.top = top.scrollY - top[id].offsetTop + "px";
    }
  }
};
</script>